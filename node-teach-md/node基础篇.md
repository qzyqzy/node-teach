### node基础篇

#### 运行调试

##### hello index.js

```
console.log('hello node.js');
```

##### bash运行

```
node hello
or 
node hello/index.js
or 
node hello/index
```

##### nodemon 自动启动

```
nodemon 文件
```

##### 单元测试 jest

```
npm i jest -g
```

- 在同级目录中新增 ______test______文件夹
- 再创建 index.spec.js

- 文件命名保持一致

```
test('hello-index.js', () => {
	let res = require('./../index');
	// 断言
	expect(res).toBe('hello node.js')
});

```

运行测试方法，可以查看效果

```
jest hello
or
jest hello --watch 实时监视 修改代码之后可以立即测试出效果
```

注意点

- jest hello 运行失败时  先初始化项目 npm init

  

##### 测试代码生成工具

###### 生成测试文件名

```
test('测试代码工具生成文件名', () => {
    let test = new (require('./../index'))()
    let res = test.getFileName('/mytest/index.js')
    expect(res).toBe('/mytest/__test__/index.spec.js')
})
```

我们可以先写好测试代码，测试驱动，然后实时修改我们的代码

###### 生成测试代码

###### 生成测试文件 todo

#### 同步、异步、阻塞、非阻塞

关于上面的概念，网上有一个很经典的响水壶解释

出场人物：老张，水壶两把（普通水壶，简称水壶；会响的水壶，简称响水壶）

- 老张把水壶放到火上，立等水开。（同步阻塞）

  ```
  老张觉得自己有点傻
  ```

- 老张把水壶放到火上，去客厅看电视，时不时去厨房看看水开没有。（同步非阻塞）

  ```
  老张还是觉得自己有点傻，于是变高端了，买了把会响笛的那种水壶。水开之后，能大声发出嘀~~~~的噪音
  ```

- 老张把响水壶放到火上，立等水开。（异步阻塞）

  ```
  老张觉得这样傻等意义不大
  ```

- 老张把响水壶放到火上，去客厅看电视，水壶响之前不再去看它了，响了再去拿壶。（异步非阻塞）

  ```
  老张觉得自己聪明了
  ```

  从上面的示例中，我们可以明白一件事情，__同步异步，阻塞非阻塞__他们针对的对象是不一样的

  所谓**同步异步**，只是对于水壶而言。
  普通水壶，同步；响水壶，异步。
  虽然都能干活，但响水壶可以在自己完工之后，提示老张水开了。这是普通水壶所不能及的。

  调用者（主线程）来说是阻塞跟非阻塞，被调用者（任务）是同步跟异步。

  同步只能让调用者去轮询自己（情况2中），造成老张效率的低下。

  虽然3中响水壶是异步的，可对于立等的老张没有太大的意义。所以一般异步是配合非阻塞使用的，这样才能发挥异步的效用。